<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <title>Document</title>
</head>
<body>
    <input type="text"  id="txtrrn" value="891223-1700001">
<br>
<button id="btn">만나이 계산</button>
<p id="demo"></p>  	    
<script>
    document.getElementById("btn").onclick=function(){
        var rrn=document.getElementById("txtrrn").value;
        var pdemo=document.getElementById("demo");
        var age=getAge(rrn);
       pdemo.innerText=age;
    }
    function getAge(rrn){
           //년 ,월 ,일 자르기 , 성별도 
           let bYear=parseInt(rrn.slice(0,2));
        let bMonth=parseInt(rrn.slice(2,4));
        let bDay=parseInt(rrn.slice(4,6));
        let sexAuth=parseInt(rrn.substr(7,1));

        //오늘 날짜 
        const today=new Date();
        
        //성별에 따라서 년에 얼마가 더해질지 다르다.    
        switch(sexAuth){
            case 1: case 2: case 5: case 6:
                bYear+=1900;
                break;
            case 3: case 4: case 7: case 8:
                bYear+=2000;
                break;
            case 9: case 10:
                bYear+=2000;
                break;
        }

        let to_year=today.getFullYear();
        let age=to_year-bYear;
        let b=bMonth*100+bDay;
        let a=today.getMonth()*100+today.getDate();

        if(a<b){age--;}
        return age;
    }
</script>
</body>
</html>

